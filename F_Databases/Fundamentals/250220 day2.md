## **1️⃣ DB 정규화란?**
- **데이터 중복을 최소화**하고, **데이터 무결성을 유지**하기 위해 테이블을 구조적으로 정리하는 과정.
- **중복 데이터가 많아질수록** 데이터 수정, 삭제, 삽입할 때 **이상(Anomaly)이 발생**할 가능성이 커짐.
- 이를 해결하기 위해 **정규화(Normalization)** 를 적용하여 데이터를 **체계적으로 분리**하는 것.

---

## **2️⃣ 정규화가 필요한 이유**
✅ **데이터 무결성 유지**
- **데이터 일관성(Consistency)** 을 보장하여 오류 발생을 방지.
- 한 곳에서 수정해야 할 데이터를 여러 곳에서 변경해야 하는 문제를 해결.

✅ **데이터 중복 최소화 → 저장 공간 절약**
- 불필요한 데이터 중복을 제거하여 **스토리지 절약**.
- 데이터 중복으로 인한 성능 저하 방지.

✅ **데이터 수정/삽입/삭제 이상(Anomaly) 방지**
- 데이터가 여러 곳에 중복 저장되면 **수정 시 여러 곳을 동시에 변경해야 함**.
- 삭제 시 의도치 않은 데이터 손실이 발생할 가능성이 있음.
- 정규화를 하면 이를 방지할 수 있음.

✅ **데이터 검색 성능 향상**
- 불필요한 중복을 제거하여 **인덱싱과 검색 속도를 높일 수 있음**.

✅ **유지보수 용이**
- 데이터가 **구조적으로 정리**되어 있어 유지보수가 쉬워짐.

---

## **3️⃣ 정규화를 하지 않으면? (Denormalization)**
❌ **데이터 중복 증가 → 저장 공간 낭비**  
❌ **데이터 수정 시 여러 개의 레코드를 변경해야 함 → 유지보수 어려움**  
❌ **데이터 삭제 시 의도치 않은 손실 발생 가능성**  
❌ **데이터 검색 속도 저하 (특히 대용량 데이터일 경우)**

하지만 **정규화를 지나치게 하면 JOIN 연산이 많아져서 성능이 저하될 수도 있음**.  
그래서 일부 기업에서는 **성능을 위해 일부 테이블을 반정규화(Denormalization)하는 경우도 있음**.

---

## **4️⃣ 정규화 단계 (1NF ~ 5NF) 및 예제**

### 🔹 **제1 정규형 (1NF)**
> **한 개의 컬럼에는 하나의 값만 저장해야 함.**
- 중복된 데이터를 제거하고, 하나의 셀에 여러 개의 값을 넣지 않는다.

#### 🔸 **1NF 적용 전 테이블 (비정규형)**
| 회원ID | 이름   | 수강 과목        |
|--------|--------|-----------------|
| 1      | 김기욱 | 헬스, 수영       |
| 2      | 이지수 | 골프             |
| 3      | 박찬호 | 헬스, 요가, 필라테스 |

- **문제점**: 하나의 칼럼(`수강 과목`)에 여러 개의 값이 저장되어 있음.

#### 🔸 **1NF 적용 후 테이블**
| 회원ID | 이름   | 수강 과목 |
|--------|--------|----------|
| 1      | 김기욱 | 헬스     |
| 1      | 김기욱 | 수영     |
| 2      | 이지수 | 골프     |
| 3      | 박찬호 | 헬스     |
| 3      | 박찬호 | 요가     |
| 3      | 박찬호 | 필라테스 |

- **변경 사항**: 하나의 칼럼에는 하나의 값만 저장하도록 변경.

---

### 🔹 **제2 정규형 (2NF)**
> **부분 종속(Partial Dependency)을 제거.**
- **컴포지트 프라이머리 키(복합 키)**가 존재할 경우, 일부 컬럼이 기본 키의 일부에만 의존하지 않도록 분리한다.

#### 🔸 **2NF 적용 전 테이블**
| 회원ID | 이름   | 수강 과목 | 수강료 |
|--------|--------|----------|--------|
| 1      | 김기욱 | 헬스     | 60,000 |
| 1      | 김기욱 | 수영     | 80,000 |
| 2      | 이지수 | 골프     | 150,000 |

- **문제점**: `수강료`는 `수강 과목`에 따라 결정되며, `회원ID`와는 상관이 없음.
- 헬스 가격이 바뀌면 모든 헬스 데이터를 수정해야 함 → **데이터 무결성이 깨질 위험**.

#### 🔸 **2NF 적용 후 테이블**
✅ **회원 테이블**
| 회원ID | 이름   |
|--------|--------|
| 1      | 김기욱 |
| 2      | 이지수 |

✅ **수강 테이블**
| 회원ID | 수강 과목 |
|--------|----------|
| 1      | 헬스     |
| 1      | 수영     |
| 2      | 골프     |

✅ **과목 테이블**
| 수강 과목 | 수강료 |
|----------|--------|
| 헬스     | 60,000 |
| 수영     | 80,000 |
| 골프     | 150,000 |

- **변경 사항**: `수강료`를 별도의 `과목 테이블`로 분리하여 중복을 제거.

---

### 🔹 **제3 정규형 (3NF)**
> **이행 종속(Transitive Dependency) 제거**
- **기본 키에 의존하지 않는 컬럼을 제거**해야 함.

#### 🔸 **3NF 적용 전 테이블**
| 회원ID | 수강 과목 | 강사명  | 출신 대학 |
|--------|----------|--------|----------|
| 1      | 헬스     | 김태형 | 서울대   |
| 2      | 수영     | 박진수 | 고려대   |
| 3      | 골프     | 이영표 | 연세대   |

- **문제점**: `출신 대학`은 `강사명`에 종속됨. 즉, `회원ID`와는 직접적인 관계가 없음.
- 강사의 출신 대학을 변경하면 모든 데이터를 수정해야 함.

#### 🔸 **3NF 적용 후 테이블**
✅ **수강 테이블**
| 회원ID | 수강 과목 | 강사명  |
|--------|----------|--------|
| 1      | 헬스     | 김태형 |
| 2      | 수영     | 박진수 |
| 3      | 골프     | 이영표 |

✅ **강사 테이블**
| 강사명  | 출신 대학 |
|--------|----------|
| 김태형 | 서울대   |
| 박진수 | 고려대   |
| 이영표 | 연세대   |

- **변경 사항**: `출신 대학`을 `강사 테이블`로 분리하여 데이터 중복을 제거.

---

### 🔹 **제4 정규형 (4NF)**
> **다중 종속(Multi-Valued Dependency) 제거**
- 한 행의 특정 속성이 두 개 이상의 독립적인 값 집합을 포함할 때 발생.

### 🔹 **제5 정규형 (5NF)**
> **조인 종속(Join Dependency) 제거**
- **모든 조인이 반드시 의미를 가져야 한다는 원칙**.
- 대부분의 경우 **3NF까지 적용하고, 일부 성능 최적화를 위해 반정규화 진행**.

---

## **5️⃣ 정규화 vs 반정규화(Denormalization)**
| 비교 항목 | 정규화 (Normalization) | 반정규화 (Denormalization) |
|---------|----------------------|--------------------------|
| **목적** | 데이터 중복 최소화 | 성능 최적화 |
| **장점** | 데이터 무결성 보장, 유지보수 용이 | 데이터 조회 속도 향상 |
| **단점** | JOIN이 많아지면 성능 저하 가능 | 데이터 중복으로 인해 수정/삭제 어려움 |
| **사용 사례** | OLTP 시스템 (은행, 쇼핑몰 등) | OLAP 시스템 (데이터 분석, BI 등) |

---

## **6️⃣ 결론**
- **일반적으로 3NF까지만 적용**하는 것이 일반적.
- **OLTP 시스템(트랜잭션 중심)에서는 정규화 필수**,  
  반면, **OLAP 시스템(분석 중심)에서는 일부 반정규화 필요**.
